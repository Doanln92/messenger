webpackJsonp([1],{130:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=a(0),c=a.n(s),i=a(48),l=a(131),u=a(140),p=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),m=function(e){function t(e){n(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.emit=function(e,t){i.a.socket().emit(e,t)},a.ioEventListener=function(){var e=i.a.socket();e.on("check-auth-profile-success",function(e){var t=e.access_token;i.a.set({user:e,access_token:t}),a.setState({user:e})}),e.on("check-auth-profile-fail",function(e){a.props.history.push("/login")})},a.go=function(e){a.props.history.push(e)},a.state={user:{name:"\u0110ang x\u1eed l\xfd...",email:"Please wait..."}},a}return r(t,e),p(t,[{key:"render",value:function(){var e={go:this.go},t=this.state.user,a=t.access_token?c.a.createElement("div",null,c.a.createElement(l.a,{active:"home",events:e}),c.a.createElement(u.a,{events:e})):c.a.createElement("div",null,c.a.createElement("h1",{className:"text-center"},t.name),c.a.createElement("p",{className:"text-center"},t.email));return c.a.createElement("div",{className:"lab lab0"},c.a.createElement("div",{className:"lab-content"},a))}},{key:"componentDidMount",value:function(){this.ioEventListener(),i.a.checkLogin()?this.setState({user:i.a.user}):i.a.access_token?this.emit("verify-account",{data:{access_token:i.a.access_token},success:"check-auth-profile-success",fail:"check-auth-profile-fail"}):this.props.history.push("/login")}}]),t}(s.Component);t.default=m},131:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=a(0),c=a.n(s),i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=function(e){function t(e){n(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.go=function(e){a.props.history.push(e)},a.state={nav:[{link:"/",text:"Home",active:"home"},{link:"/messages",text:"Ph\xf2ng chat",active:"messages"},{link:"/profile",text:"Profile",active:"profile"},{link:"/logout",text:"[ Tho\xe1t ]",active:"logout"}]},a}return r(t,e),i(t,[{key:"render",value:function(){var e=this.props.active;e||(e="home");var t=this.state.nav.map(function(t,a){var n="nav-link"+(t.active==e?" active":"");return c.a.createElement("a",{className:n,href:t.link,key:a},t.text)});return c.a.createElement("header",{className:"masthead"},c.a.createElement("div",{className:"inner"},c.a.createElement("nav",{className:"nav nav-masthead justify-content-center"},t)))}}]),t}(s.Component);t.a=l},132:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=a(0),c=a.n(s),i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=function(e){function t(e){n(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.go=function(e){a.props.history.push(e)},a.selectTab=function(e){a.props.onSelectTab(e)},a.state={nav:[{link:"/profile/info",text:"Thay t\xean \u0111\u1ed5i h\u1ecd",tab:"info",active:"info"},{link:"/profile/account",text:"Th\xf4ng tin t\xe0i kho\u1ea3n",tab:"account",active:"account"},{link:"/profile/password",text:"\u0110\u1ed5i m\u1eadt kh\u1ea9u",tab:"password",active:"password"}]},a}return r(t,e),i(t,[{key:"render",value:function(){var e=this,t=this.props.active;t||(t="home");var a=this.state.nav.map(function(a,n){var o="nav-link"+(a.active==t?" active":"");return c.a.createElement("li",{className:"nav-item",key:n},c.a.createElement("a",{className:o,href:"javascript:void(0)","data-tab":a.tab,onClick:function(t){return e.selectTab(t.target.getAttribute("data-tab"))}},a.text))});return c.a.createElement("aside",{className:"sidebar"},c.a.createElement("nav",{className:"nav d-md-flex"},a))}}]),t}(s.Component);t.a=l},140:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=a(0),c=a.n(s),i=a(48),l=a(132),u=a(141),p=a(142),m=a(143),f=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),h=function(e){function t(e){n(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.emit=function(e,t){i.a.socket().emit(e,t)},a.ioEventListener=function(){var e=i.a.socket();e.on("check-profile-info-success",function(e){var t=e.access_token;i.a.set({user:e,access_token:t}),a.setState({user:e})}),e.on("check-profile-info-fail",function(e){a.props.history.push("/login")})},a.changeInfo=function(e){a.setState({user:e})},a.selectTab=function(e){a.setState({tab:e})},a.state={user:{},tab:"info"},a}return r(t,e),f(t,[{key:"render",value:function(){var e=this.state.user,t=this.state.tab,a=this.props.events,n="info"===t?c.a.createElement(u.a,{onChangeInfo:this.changeInfo,events:a}):"account"===t?c.a.createElement(p.a,{events:a}):"password"===t?c.a.createElement(m.a,{events:a}):"",o=e.access_token?c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-sm-6 col-md-5 col-lg-4 col-xl-3"},c.a.createElement("div",{className:"avatar text-center"},c.a.createElement("img",{src:e.avatar,alt:e.name})),c.a.createElement("div",{className:"name"},c.a.createElement("h3",{className:"text-center"},e.name)),c.a.createElement("div",{className:"menu mt-2"},c.a.createElement(l.a,{active:t,onSelectTab:this.selectTab}))),c.a.createElement("div",{className:"col-sm-6 col-md-7 col-lg-8 col-xl-9"},n)):c.a.createElement("h3",null,"\u0110ang x\u1eed l\xfd...");return c.a.createElement("div",{className:"profile-info container"},o)}},{key:"componentDidMount",value:function(){this.ioEventListener(),i.a.checkLogin()?this.setState({user:i.a.user}):i.a.access_token?this.emit("verify-account",{data:{access_token:i.a.access_token},success:"check-profile-info-success",fail:"check-profile-info-fail"}):this.props.history.push("/login")}}]),t}(s.Component);t.a=h},141:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=a(0),c=a.n(s),i=a(48),l=(a(132),function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}()),u=function(e){function t(e){n(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.emit=function(e,t){i.a.socket().emit(e,t)},a.ioEventListener=function(){var e=i.a.socket();e.on("check-profile-info-success",function(e){var t=e.access_token;i.a.set({user:e,access_token:t});var n=a.state.form;n.id=e.id,n.name=e.name,n.avatar=e.avatar,a.setState({form:n,user:e})}),e.on("check-profile-info-fail",function(e){a.go("/login")}),e.on("profile-update-info-success",function(e){var t=e.access_token;i.a.set({user:e,access_token:t});var n=a.state.form;n.name=e.name,n.avatar=e.avatar,a.setState({form:n,user:e}),a.props.onChangeInfo(e),alert("C\u1eadp nh\u1eadt th\xf4ng tin th\xe0nh c\xf4ng")}),e.on("profile-update-info-fail",function(e){alert("C\u1eadp nh\u1eadt th\xe0nh c\xf4ng. Vui l\xf2ng \u0111\u0103ng nh\u1eadp l\u1ea1i")})},a.inputDidUpdate=function(e){var t=e.target,n=t.name,o=t.value,r=a.state.form;r[n]=o,a.setState({form:r})},a.chooseAvatar=function(e){var t=e.target;if(window.File&&window.FileList&&window.FileReader){var n=t.files;if(n.length){var o=n[0];if(0==o.type.indexOf("image")){var r=new FileReader;r.onload=function(e){var t=a.state.form;t.avatar=e.target.result,t.avatar_data=e.target.result,t.avatar_file=o.name,a.setState({form:t})},r.readAsDataURL(o)}else alert("File kh\xf4ng h\u1ee3p l\u1ec7")}}else alert("tr\xecnh duy\u1ec7t kh\xf4ng h\u1ed5 tr\u1ecd upload file")},a.save=function(){var e=a.state.form,t=[];if(e.name||t.push("Vui l\xf2ng nh\u1eadp h\u1ecd t\xean!"),e.password||t.push("Vui l\xf2ng nh\u1eadp M\u1eadt kh\u1ea9u!"),t.length)return alert(t.join("\n"));i.a.request("save-info","POST",e,function(e){if(e.status){var t=e.user.access_token,n={data:{access_token:t},success:"profile-update-info-success",fail:"profile-update-info-fail"};a.emit("verify-account",n)}else e.errors&&alert(e.errors.join(", \n"))})},a.go=function(e){a.props.events.go(e)},a.state={user:{},form:{access_token:"",name:"",avatar:"",avatar_file:"",avatar_data:"",password:""}},a}return r(t,e),l(t,[{key:"render",value:function(){var e=this.state.form,t=""!==e.avatar_file?e.avatar_file:"Ch\u1ecdn \u1ea3nh \u0111ai di\u1ec7n",a=this.state.user,n=a.access_token?c.a.createElement("div",{className:"profile-form form"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-sm-12 col-md-5 col-lg-4 col-xl-3"},c.a.createElement("label",{htmlFor:"profile-name"},"H\u1ecd v\xe0 t\xean")),c.a.createElement("div",{className:"col-sm-12 col-md-7 col-lg-8 col-xl-9"},c.a.createElement("div",{className:"form-group"},c.a.createElement("div",{className:"form-control-input input-group"},c.a.createElement("div",{className:"input-group-prepend"},c.a.createElement("label",{htmlFor:"profile-name",className:"input-group-text"},c.a.createElement("i",{className:"fa fa-user"}))),c.a.createElement("input",{type:"text",name:"name",id:"profile-name",onChange:this.inputDidUpdate,onKeyUp:this.inputDidUpdate,className:"form-control",placeholder:"Nh\u1eadp h\u1ecd v\xe0 t\xean",value:e.name}))))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-sm-12 col-md-5 col-lg-4 col-xl-3"},c.a.createElement("label",{htmlFor:"profile-avatar"},"\u1ea2nh \u0111\u1ea1i di\u1ec7n")),c.a.createElement("div",{className:"col-sm-12 col-md-7 col-lg-8 col-xl-9"},c.a.createElement("div",{className:"form-group"},c.a.createElement("div",{className:"input-group mb-3"},c.a.createElement("div",{className:"input-group-prepend"},c.a.createElement("span",{className:"input-group-text"},c.a.createElement("i",{className:"fa fa-picture-o"}))),c.a.createElement("div",{className:"custom-file"},c.a.createElement("input",{type:"file",accept:"image/png, image/jpeg, image/gif",onChange:this.chooseAvatar,id:"profile-user-avatar",className:"custom-file-input"}),c.a.createElement("label",{className:"custom-file-label",htmlFor:"profile-user-avatar"},t)))))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-sm-12 col-md-5 col-lg-4 col-xl-3"},c.a.createElement("label",{htmlFor:"profile-password"},"M\u1eadt kh\u1ea9u hi\u1ec7n t\u1ea1i")),c.a.createElement("div",{className:"col-sm-12 col-md-7 col-lg-8 col-xl-9"},c.a.createElement("div",{className:"form-group"},c.a.createElement("div",{className:"form-control-input input-group"},c.a.createElement("div",{className:"input-group-prepend"},c.a.createElement("label",{htmlFor:"profile-password",className:"input-group-text"},c.a.createElement("i",{className:"fa fa-key"}))),c.a.createElement("input",{type:"password",name:"password",id:"profile-password",onChange:this.inputDidUpdate,onKeyUp:this.inputDidUpdate,className:"form-control",placeholder:"Nh\u1eadp M\u1eadt kh\u1ea9u hi\u1ec7n t\u1ea1i",value:e.password}))))),c.a.createElement("div",{className:"form-group buttons text-center"},c.a.createElement("button",{type:"button",className:"btn btn-success",onClick:this.save},c.a.createElement("i",{className:"fa fa-pencil"})," L\u01b0u l\u1ea1i"))):c.a.createElement("h3",null,"\u0110ang x\u1eed l\xfd...");return c.a.createElement("div",{className:"profile-info mt-3"},n)}},{key:"componentDidMount",value:function(){if(this.ioEventListener(),i.a.checkLogin()){var e=i.a.user,t=this.state.form;t.id=e.id,t.access_token=e.access_token,t.name=e.name,t.avatar=e.avatar,this.setState({form:t,user:e})}else i.a.access_token?this.emit("verify-account",{data:{access_token:i.a.access_token},success:"check-profile-info-success",fail:"check-profile-info-fail"}):this.go("/login")}}]),t}(s.Component);t.a=u},142:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=a(0),c=a.n(s),i=a(48),l=(a(132),function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}()),u=function(e){function t(e){n(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.emit=function(e,t){i.a.socket().emit(e,t)},a.ioEventListener=function(){var e=i.a.socket();e.on("check-profile-account-success",function(e){var t=e.access_token;i.a.set({user:e,access_token:t});var n=a.state.form;n.id=e.id,n.name=e.name,a.setState({form:n,user:e})}),e.on("check-profile-account-fail",function(e){a.go("/login")}),e.on("profile-update-account-success",function(e){var t=e.access_token;i.a.set({user:e,access_token:t});var n=a.state.form;n.access_token=e.access_token,n.username=e.username,n.email=e.email,a.setState({form:n,user:e}),alert("C\u1eadp nh\u1eadt th\xf4ng tin th\xe0nh c\xf4ng")}),e.on("profile-update-account-fail",function(e){alert("C\u1eadp nh\u1eadt th\xe0nh c\xf4ng. Vui l\xf2ng \u0111\u0103ng nh\u1eadp l\u1ea1i")})},a.inputDidUpdate=function(e){var t=e.target,n=t.name,o=t.value,r=a.state.form;r[n]=o,a.setState({form:r})},a.save=function(){var e=a.state.form,t=[];if(e.username||t.push("Vui l\xf2ng nh\u1eadp t\xean truy c\u1eadp!"),e.email||t.push("Vui l\xf2ng nh\u1eadp email!"),e.password||t.push("Vui l\xf2ng nh\u1eadp M\u1eadt kh\u1ea9u!"),t.length)return alert(t.join("\n"));i.a.request("save-account","POST",e,function(e){if(e.status){var t=e.user.access_token,n={data:{access_token:t},success:"profile-update-account-success",fail:"profile-update-account-fail"};a.emit("verify-account",n)}else e.errors&&alert(e.errors.join(", \n"))})},a.go=function(e){a.props.events.go(e)},a.state={user:{},form:{access_token:"",username:"",email:"",password:""}},a}return r(t,e),l(t,[{key:"render",value:function(){var e=this.state.form,t=this.state.user,a=t.access_token?c.a.createElement("div",{className:"profile-form form"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-sm-12 col-md-5 col-lg-4 col-xl-3"},c.a.createElement("label",{htmlFor:"profile-username"},"T\xean truy c\u1eadp")),c.a.createElement("div",{className:"col-sm-12 col-md-7 col-lg-8 col-xl-9"},c.a.createElement("div",{className:"form-group"},c.a.createElement("div",{className:"form-control-input input-group"},c.a.createElement("div",{className:"input-group-prepend"},c.a.createElement("label",{htmlFor:"profile-username",className:"input-group-text"},c.a.createElement("i",{className:"fa fa-user"}))),c.a.createElement("input",{type:"text",name:"username",id:"profile-username",onChange:this.inputDidUpdate,onKeyUp:this.inputDidUpdate,className:"form-control",placeholder:"Nh\u1eadp t\xean truy c\u1eadp",value:e.username}))))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-sm-12 col-md-5 col-lg-4 col-xl-3"},c.a.createElement("label",{htmlFor:"profile-email"},"Email")),c.a.createElement("div",{className:"col-sm-12 col-md-7 col-lg-8 col-xl-9"},c.a.createElement("div",{className:"form-group"},c.a.createElement("div",{className:"form-control-input input-group"},c.a.createElement("div",{className:"input-group-prepend"},c.a.createElement("label",{htmlFor:"profile-email",className:"input-group-text"},c.a.createElement("i",{className:"fa fa-envelope"}))),c.a.createElement("input",{type:"text",name:"email",id:"profile-email",onChange:this.inputDidUpdate,onKeyUp:this.inputDidUpdate,className:"form-control",placeholder:"Nh\u1eadp email",value:e.email}))))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-sm-12 col-md-5 col-lg-4 col-xl-3"},c.a.createElement("label",{htmlFor:"profile-password"},"M\u1eadt kh\u1ea9u hi\u1ec7n t\u1ea1i")),c.a.createElement("div",{className:"col-sm-12 col-md-7 col-lg-8 col-xl-9"},c.a.createElement("div",{className:"form-group"},c.a.createElement("div",{className:"form-control-input input-group"},c.a.createElement("div",{className:"input-group-prepend"},c.a.createElement("label",{htmlFor:"profile-password",className:"input-group-text"},c.a.createElement("i",{className:"fa fa-key"}))),c.a.createElement("input",{type:"password",name:"password",id:"profile-password",onChange:this.inputDidUpdate,onKeyUp:this.inputDidUpdate,className:"form-control",placeholder:"Nh\u1eadp M\u1eadt kh\u1ea9u hi\u1ec7n t\u1ea1i",value:e.password}))))),c.a.createElement("div",{className:"form-group buttons text-center"},c.a.createElement("button",{type:"button",className:"btn btn-success",onClick:this.save},c.a.createElement("i",{className:"fa fa-pencil"})," L\u01b0u l\u1ea1i"))):c.a.createElement("h3",null,"\u0110ang x\u1eed l\xfd...");return c.a.createElement("div",{className:"profile-info mt-3"},a)}},{key:"componentDidMount",value:function(){if(this.ioEventListener(),i.a.checkLogin()){var e=i.a.user,t=this.state.form;t.access_token=e.access_token,t.username=e.username,t.email=e.email,this.setState({form:t,user:e})}else i.a.access_token?this.emit("verify-account",{data:{access_token:i.a.access_token},success:"check-profile-account-success",fail:"check-profile-account-fail"}):this.go("/login")}}]),t}(s.Component);t.a=u},143:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=a(0),c=a.n(s),i=a(48),l=(a(132),function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}()),u=function(e){function t(e){n(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.emit=function(e,t){i.a.socket().emit(e,t)},a.ioEventListener=function(){var e=i.a.socket();e.on("check-profile-password-success",function(e){var t=e.access_token;i.a.set({user:e,access_token:t});var n=a.state.form;n.id=e.id,a.setState({form:n,user:e})}),e.on("check-profile-password-fail",function(e){a.go("/login")}),e.on("profile-update-password-success",function(e){var t=e.access_token;i.a.set({user:e,access_token:t});var n=a.state.form;n.name=e.name,n.avatar=e.avatar,a.setState({form:n,user:e}),window.confirm("Thay \u0111\u1ed5i m\u1eadt kh\u1ea9u th\xe0nh c\xf4ng!\n B\u1ea1n c\xf3 mu\u1ed1n \u0111\u0103ng nh\u1eadp l\u1ea1i kh\xf4ng?")&&a.go("/logout")}),e.on("profile-update-password-fail",function(e){alert("C\u1eadp nh\u1eadt th\xe0nh c\xf4ng. Vui l\xf2ng \u0111\u0103ng nh\u1eadp l\u1ea1i")})},a.inputDidUpdate=function(e){var t=e.target,n=t.name,o=t.value,r=a.state.form;r[n]=o,a.setState({form:r})},a.save=function(){var e=a.state.form,t=[];return e.password_current||t.push("Vui l\xf2ng nh\u1eadp m\u1eadt kh\u1ea9u hi\u1ec7n t\u1ea1i!"),e.password||t.push("Vui l\xf2ng nh\u1eadp m\u1eadt kh\u1ea9u m\u1edbi"),e.password_confirmation||t.push("Vui l\xf2ng nh\u1eadp M\u1eadt kh\u1ea9u x\xe1c nh\u1eadn!"),t.length?alert(t.join("\n")):e.password!==e.password_confirmation?alert("M\u1eadt kh\u1ea9u kh\xf4ng kh\u1edbp"):void i.a.request("save-password","POST",e,function(e){if(e.status){var t=e.user.access_token,n={data:{access_token:t},success:"profile-update-password-success",fail:"profile-update-password-fail"};a.emit("verify-account",n)}else e.errors&&alert(e.errors.join(", \n"))})},a.go=function(e){a.props.events.go(e)},a.state={user:{},form:{access_token:"",password_current:"",password:"",password_confirmation:""}},a}return r(t,e),l(t,[{key:"render",value:function(){var e=this.state.form,t=this.state.user,a=t.access_token?c.a.createElement("div",{className:"profile-form form"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-sm-12 col-md-5 col-lg-4 col-xl-3"},c.a.createElement("label",{htmlFor:"profile-password_current"},"M\u1eadt kh\u1ea9u hi\u1ec7n t\u1ea1i")),c.a.createElement("div",{className:"col-sm-12 col-md-7 col-lg-8 col-xl-9"},c.a.createElement("div",{className:"form-group"},c.a.createElement("div",{className:"form-control-input input-group"},c.a.createElement("div",{className:"input-group-prepend"},c.a.createElement("label",{htmlFor:"profile-password_current",className:"input-group-text"},c.a.createElement("i",{className:"fa fa-key"}))),c.a.createElement("input",{type:"password",name:"password_current",id:"profile-password_current",onChange:this.inputDidUpdate,onKeyUp:this.inputDidUpdate,className:"form-control",placeholder:"Nh\u1eadp M\u1eadt kh\u1ea9u hi\u1ec7n t\u1ea1i",value:e.password_current}))))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-sm-12 col-md-5 col-lg-4 col-xl-3"},c.a.createElement("label",{htmlFor:"profile-password"},"M\u1eadt kh\u1ea9u m\u1edbi")),c.a.createElement("div",{className:"col-sm-12 col-md-7 col-lg-8 col-xl-9"},c.a.createElement("div",{className:"form-group"},c.a.createElement("div",{className:"form-control-input input-group"},c.a.createElement("div",{className:"input-group-prepend"},c.a.createElement("label",{htmlFor:"profile-password",className:"input-group-text"},c.a.createElement("i",{className:"fa fa-lock"}))),c.a.createElement("input",{type:"password",name:"password",id:"profile-password",onChange:this.inputDidUpdate,onKeyUp:this.inputDidUpdate,className:"form-control",placeholder:"Nh\u1eadp M\u1eadt kh\u1ea9u m\u1edbi",value:e.password}))))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-sm-12 col-md-5 col-lg-4 col-xl-3"},c.a.createElement("label",{htmlFor:"profile-password_confirmation"},"M\u1eadt kh\u1ea9u x\xe1c nh\u1eadn")),c.a.createElement("div",{className:"col-sm-12 col-md-7 col-lg-8 col-xl-9"},c.a.createElement("div",{className:"form-group"},c.a.createElement("div",{className:"form-control-input input-group"},c.a.createElement("div",{className:"input-group-prepend"},c.a.createElement("label",{htmlFor:"profile-password_confirmation",className:"input-group-text"},c.a.createElement("i",{className:"fa fa-lock"}))),c.a.createElement("input",{type:"password",name:"password_confirmation",id:"profile-password_confirmation",onChange:this.inputDidUpdate,onKeyUp:this.inputDidUpdate,className:"form-control",placeholder:"Nh\u1eadp l\u1ea1i m\u1eadt kh\u1ea9u",value:e.password_confirmation}))))),c.a.createElement("div",{className:"form-group buttons text-center"},c.a.createElement("button",{type:"button",className:"btn btn-success",onClick:this.save},c.a.createElement("i",{className:"fa fa-check"})," L\u01b0u l\u1ea1i"))):c.a.createElement("h3",null,"\u0110ang x\u1eed l\xfd...");return c.a.createElement("div",{className:"profile-info mt-3"},a)}},{key:"componentDidMount",value:function(){if(this.ioEventListener(),i.a.checkLogin()){var e=i.a.user,t=this.state.form;t.id=e.id,t.access_token=e.access_token,t.name=e.name,t.avatar=e.avatar,this.setState({form:t,user:e})}else i.a.access_token?this.emit("verify-account",{data:{access_token:i.a.access_token},success:"check-profile-password-success",fail:"check-profile-password-fail"}):this.go("/login")}}]),t}(s.Component);t.a=u}});
//# sourceMappingURL=1.31032ed2.chunk.js.map