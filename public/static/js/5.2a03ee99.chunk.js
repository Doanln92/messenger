webpackJsonp([5],{126:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),i=n.n(s),c=(n(49),n(25)),u=n(48),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),p=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.inputDidUpdate=function(e){var t=e.target,a=t.name,o=t.value,r=n.state.form;r[a]=o,n.setState({form:r})},n.submitLogin=function(){var e=n.state.form;return e.username?e.password?void u.a.request("get-token","POST",e,function(e){e.status?n.emit("submit-login",e):e.errors&&alert(e.errors.join(", \n"))}):alert("Vui l\xf2ng nh\u1eadp m\u1eadt kh\u1ea9u"):alert("Vui l\xf2ng nh\u1eadp t\xean t\xe0i kho\u1ea3n")},n.emit=function(e,t){u.a.socket().emit(e,t)},n.ioEventListener=function(){var e=u.a.socket();e.on("login-success",function(e){var t=e.access_token;c.a.set("access_token",t),u.a.set({user:e,access_token:t}),n.showChatBox()}),e.on("auth-error",function(e){}),e.on("login-fail",function(e){alert("\u0110\u0103ng nh\u1eadp kh\xf4ng th\xe0nh c\xf4ng! \nVui l\xf2ng \u0111\u0103ng nh\u1eadp l\u1ea1i!"),console.log(e)})},n.showRegister=function(){return n.props.history.push("/register"),!1},n.showChatBox=function(){return n.props.history.push("/messages"),!1},n.state={form:{username:"",password:""}},n}return r(t,e),l(t,[{key:"render",value:function(){var e=this.state.form;return i.a.createElement("div",{className:"login-screen"},i.a.createElement("div",{className:"login-form"},i.a.createElement("div",{className:"container"},i.a.createElement("div",{className:"form-inputs"},i.a.createElement("h4",null,"\u0110\u0103ng nh\u1eadp"),i.a.createElement("div",{className:"form-group"},i.a.createElement("div",{className:"form-control-input input-group"},i.a.createElement("div",{className:"input-group-prepend"},i.a.createElement("label",{htmlFor:"login-username",className:"input-group-text"},i.a.createElement("i",{className:"fa fa-user"}))),i.a.createElement("input",{type:"text",name:"username",id:"login-username",className:"form-control",onChange:this.inputDidUpdate,onKeyUp:this.inputDidUpdate,placeholder:"Nh\u1eadp t\xe0i kho\u1ea3n",value:e.username}))),i.a.createElement("div",{className:"form-group"},i.a.createElement("div",{className:"form-control-input input-group"},i.a.createElement("div",{className:"input-group-prepend"},i.a.createElement("label",{className:"input-group-text"},i.a.createElement("i",{className:"fa fa-key"}))),i.a.createElement("input",{type:"password",name:"password",id:"login-password",onChange:this.inputDidUpdate,onKeyUp:this.inputDidUpdate,className:"form-control",placeholder:"Nh\u1eadp m\u1eadt kh\u1ea9u",value:e.password}))),i.a.createElement("div",{className:"form-group buttons text-center"},i.a.createElement("button",{type:"button",className:"btn btn-warning text-white",onClick:this.submitLogin},i.a.createElement("i",{className:"fa fa-unlock"})," \u0110\u0103ng nh\u1eadp")," ",i.a.createElement("button",{type:"button",className:"btn btn-default",onClick:this.showRegister},i.a.createElement("i",{className:"fa fa-pencil-square-o"})," \u0110\u0103ng k\xfd"))))))}},{key:"componentDidMount",value:function(){this.ioEventListener(),u.a.checkLogin()?this.props.history.push("/home"):u.a.access_token&&this.emit("verify-account",{data:{access_token:u.a.access_token},success:"login-success",fail:"login-fail"})}}]),t}(s.Component);t.default=p}});
//# sourceMappingURL=5.2a03ee99.chunk.js.map