{"version":3,"sources":["../static/js/3.8ef1b7ea.chunk.js","Register.js"],"names":["webpackJsonp","127","module","__webpack_exports__","__webpack_require__","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","defineProperty","__WEBPACK_IMPORTED_MODULE_0_react__","__WEBPACK_IMPORTED_MODULE_0_react___default","n","__WEBPACK_IMPORTED_MODULE_2__lib_LS__","__WEBPACK_IMPORTED_MODULE_3__core_Messenger__","_createClass","defineProperties","target","props","i","length","descriptor","key","protoProps","staticProps","Register","_Component","this","_this","getPrototypeOf","emit","event","data","socket","ioEventListener","on","user","access_token","set","reset","showChatBox","alert","showLogin","history","push","inputDidUpdate","e","input","name","form","state","setState","chooseAvatar","window","File","FileList","FileReader","files","file","type","indexOf","fileReader","onload","f","avatar","result","avatar_file","readAsDataURL","register","requiredFields","errors","labels","email","username","password","password_confirmation","lab","val","isEmail","test","isUsername","join","request","res","status","verify","success","fail","choose_label","a","createElement","className","htmlFor","id","onChange","onKeyUp","placeholder","accept","onClick","checkLogin","console","log"],"mappings":"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","file":"static/js/3.8ef1b7ea.chunk.js","sourcesContent":["webpackJsonp([3],{\n\n/***/ 127:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__lib_Cube__ = __webpack_require__(49);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__lib_LS__ = __webpack_require__(25);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__core_Messenger__ = __webpack_require__(48);\nvar _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var Register=function(_Component){_inherits(Register,_Component);function Register(props){_classCallCheck(this,Register);var _this=_possibleConstructorReturn(this,(Register.__proto__||Object.getPrototypeOf(Register)).call(this,props));_this.emit=function(event,data){__WEBPACK_IMPORTED_MODULE_3__core_Messenger__[\"a\" /* default */].socket().emit(event,data);};_this.ioEventListener=function(){var socket=__WEBPACK_IMPORTED_MODULE_3__core_Messenger__[\"a\" /* default */].socket();// dang nhap thanh cong\nsocket.on('register-success',function(user){var access_token=user.access_token;__WEBPACK_IMPORTED_MODULE_2__lib_LS__[\"a\" /* default */].set('access_token',access_token);__WEBPACK_IMPORTED_MODULE_3__core_Messenger__[\"a\" /* default */].set({user:user,access_token:access_token});_this.reset();_this.showChatBox();});socket.on('register-fail',function(data){alert('lỗi không xác định');});};_this.showLogin=function(){_this.props.history.push('/login');return false;};_this.showChatBox=function(){_this.props.history.push('/messages');return false;};_this.inputDidUpdate=function(e){var input=e.target;var name=input.name;var value=input.value;var form=_this.state.form;form[name]=value;_this.setState({form:form});};_this.chooseAvatar=function(e){var input=e.target;if(window.File&&window.FileList&&window.FileReader){var files=input.files;if(files.length){var file=files[0];if(file.type.indexOf(\"image\")==0){var fileReader=new FileReader();fileReader.onload=function(f){var form=_this.state.form;form.avatar=f.target.result;form.avatar_file=file.name;_this.setState({form:form});};fileReader.readAsDataURL(file);}else{alert(\"File không hợp lệ\");}}}else{alert('trình duyệt không hổ trọ upload file');}};_this.register=function(){var form=_this.state.form;var requiredFields=['name','email','username','password','password_confirmation'];var errors=[];var labels={name:'Họ tên',email:'Email',username:\"Tên đăng nhập\",password:\"Mật khẩu\",password_confirmation:\"Mật khẩu xác nhận\"};for(var name in form){if(requiredFields.indexOf(name)!==-1){var lab=labels[name];var val=form[name];if(!val.length){errors.push(lab+\" không được bỏ trống!\");}else if(name==='email'){var isEmail=/^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/.test(val);if(!isEmail){errors.push(lab+\" không hợp lệ\");}}else if(name==='username'){var isUsername=/^\\w+([\\._]?\\w+)*$/.test(val);if(!isUsername){errors.push(lab+\" không hợp lệ\");}}else if(name==='password'){if(val.length<6){errors.push(lab+\" phải chứa ít nhất 6 ký tự\");}}else if(name==='password_confirmation'){if(val!==form.password){errors.push(lab+\" không khớp\");}}}}if(errors.length){alert(errors.join(\"\\n\"));}else{__WEBPACK_IMPORTED_MODULE_3__core_Messenger__[\"a\" /* default */].request('create','POST',form,function(res){if(!res.status){if(res.errors)alert(res.errors.join(\", \\n\"));}else{var access_token=res.access_token;var verify={data:{access_token:access_token},success:\"register-success\",fail:'register-fail'};_this.emit('verify-account',verify);}});}};_this.reset=function(){var form={name:\"\",email:\"\",avatar:\"\",avatar_file:\"\",username:\"\",password:\"\",password_confirmation:\"\"};_this.setState({form:form});};_this.state={form:{name:\"\",email:\"\",avatar:\"\",avatar_file:\"\",username:\"\",password:\"\",password_confirmation:\"\"}};return _this;}_createClass(Register,[{key:\"render\",value:function render(){var form=this.state.form;var choose_label=form.avatar_file!==\"\"?form.avatar_file:\"Chọn ảnh đai diện\";return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"div\",{className:\"register-screen\"},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"div\",{className:\"register-form\"},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"div\",{className:\"container\"},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"div\",{className:\"form-inputs\"},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"h4\",null,\"\\u0110\\u0103ng k\\xFD\"),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"div\",{className:\"form-group\"},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"div\",{className:\"form-control-input input-group\"},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"div\",{className:\"input-group-prepend\"},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"label\",{htmlFor:\"register-name\",className:\"input-group-text\"},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"i\",{className:\"fa fa-user\"}))),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"input\",{type:\"text\",name:\"name\",id:\"register-name\",onChange:this.inputDidUpdate,onKeyUp:this.inputDidUpdate,className:\"form-control\",placeholder:\"Nh\\u1EADp h\\u1ECD v\\xE0 t\\xEAn\",value:form.name}))),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"div\",{className:\"form-group\"},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"div\",{className:\"input-group mb-3\"},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"div\",{className:\"input-group-prepend\"},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"span\",{className:\"input-group-text\"},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"i\",{className:\"fa fa-picture-o\"}))),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"div\",{className:\"custom-file\"},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"input\",{type:\"file\",accept:\"image/png, image/jpeg, image/gif\",onChange:this.chooseAvatar,id:\"register-user-avatar\",className:\"custom-file-input\"}),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"label\",{className:\"custom-file-label\",htmlFor:\"register-user-avatar\"},choose_label)))),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"div\",{className:\"form-group \"},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"div\",{className:\"form-control-input input-group\"},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"div\",{className:\"input-group-prepend\"},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"label\",{htmlFor:\"register-email\",className:\"input-group-text\"},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"i\",{className:\"fa fa-envelope\"}))),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"input\",{type:\"email\",name:\"email\",id:\"register-email\",onChange:this.inputDidUpdate,onKeyUp:this.inputDidUpdate,className:\"form-control\",placeholder:\"Nh\\u1EADp email\",value:form.email}))),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"div\",{className:\"form-group \"},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"div\",{className:\"form-control-input input-group\"},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"div\",{className:\"input-group-prepend\"},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"label\",{htmlFor:\"register-username\",className:\"input-group-text\"},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"i\",{className:\"fa fa-lock\"}))),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"input\",{type:\"text\",name:\"username\",id:\"register-username\",onChange:this.inputDidUpdate,onKeyUp:this.inputDidUpdate,className:\"form-control\",placeholder:\"Nh\\u1EADp t\\xEAn ng\\u01B0\\u1EDDi d\\xF9ng\",value:form.username}))),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"div\",{className:\"form-group \"},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"div\",{className:\"form-control-input input-group\"},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"div\",{className:\"input-group-prepend\"},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"label\",{htmlFor:\"register-password\",className:\"input-group-text\"},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"i\",{className:\"fa fa-key\"}))),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"input\",{type:\"password\",name:\"password\",id:\"register-password\",onChange:this.inputDidUpdate,onKeyUp:this.inputDidUpdate,className:\"form-control\",placeholder:\"Nh\\u1EADp m\\u1EADt kh\\u1EA9u\",value:form.password}))),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"div\",{className:\"form-group \"},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"div\",{className:\"form-control-input input-group\"},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"div\",{className:\"input-group-prepend\"},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"label\",{htmlFor:\"register-password-confirm\",className:\"input-group-text\"},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"i\",{className:\"fa fa-key\"}))),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"input\",{type:\"password\",name:\"password_confirmation\",id:\"register-password-confirm\",onChange:this.inputDidUpdate,onKeyUp:this.inputDidUpdate,className:\"form-control\",placeholder:\"Nh\\u1EADp l\\u1EA1i m\\u1EADt kh\\u1EA9u\",value:form.password_confirmation}))),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"div\",{className:\"form-group buttons text-center\"},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"button\",{type:\"button\",className:\"btn btn-warning text-white\",onClick:this.register},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"i\",{className:\"fa fa-pencil-square-o\"}),\" \\u0110\\u0103ng k\\xFD\"),\" \",__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"button\",{type:\"button\",className:\"btn btn-default\",onClick:this.showLogin},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"i\",{className:\"fa fa-unlock\"}),\" \\u0110\\u0103ng nh\\u1EADp\"))))));}},{key:\"componentDidMount\",value:function componentDidMount(){this.ioEventListener();if(__WEBPACK_IMPORTED_MODULE_3__core_Messenger__[\"a\" /* default */].checkLogin()){this.props.history.push('/home');}else if(__WEBPACK_IMPORTED_MODULE_3__core_Messenger__[\"a\" /* default */].access_token){this.emit('verify-account',{data:{access_token:__WEBPACK_IMPORTED_MODULE_3__core_Messenger__[\"a\" /* default */].access_token},success:'register-success'});}console.log('register rendered');}}]);return Register;}(__WEBPACK_IMPORTED_MODULE_0_react__[\"Component\"]);/* harmony default export */ __webpack_exports__[\"default\"] = (Register);\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/3.8ef1b7ea.chunk.js","import React, { Component } from \"react\";\r\n\r\nimport Cube from \"./lib/Cube\";\r\nimport LS from \"./lib/LS\";\r\n\r\nimport Messenger from './core/Messenger';\r\n\r\n\r\nclass Register extends Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            form:{\r\n                name:\"\",\r\n                email:\"\",\r\n                avatar: \"\",\r\n                avatar_file: \"\",\r\n                username:\"\",\r\n                password:\"\",\r\n                password_confirmation:\"\"\r\n            }\r\n        };\r\n    }\r\n\r\n    render(){\r\n        let {form} = this.state;\r\n        let choose_label = form.avatar_file !== \"\" ? form.avatar_file : \"Chọn ảnh đai diện\";\r\n        return (\r\n            <div className=\"register-screen\">\r\n                <div className=\"register-form\">\r\n                    <div className=\"container\">\r\n                        <div className=\"form-inputs\">\r\n                            <h4>Đăng ký</h4>\r\n                            <div className=\"form-group\">\r\n                                <div className=\"form-control-input input-group\">\r\n                                    <div className=\"input-group-prepend\">\r\n                                        <label htmlFor=\"register-name\" className=\"input-group-text\"><i className=\"fa fa-user\"></i></label>\r\n                                    </div>\r\n                                    <input type=\"text\" name=\"name\" id=\"register-name\" onChange={this.inputDidUpdate} onKeyUp={this.inputDidUpdate} className=\"form-control\" placeholder=\"Nhập họ và tên\" value={form.name} />\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"form-group\">\r\n                                <div className=\"input-group mb-3\">\r\n                                    <div className=\"input-group-prepend\">\r\n                                        <span className=\"input-group-text\"><i className=\"fa fa-picture-o\"></i></span>\r\n                                    </div>\r\n                                    <div className=\"custom-file\">\r\n                                        <input type=\"file\" accept=\"image/png, image/jpeg, image/gif\" onChange={this.chooseAvatar} id=\"register-user-avatar\" className=\"custom-file-input\" />\r\n                                        <label className=\"custom-file-label\" htmlFor=\"register-user-avatar\">{choose_label}</label>\r\n                                    </div>\r\n                                </div>\r\n\r\n                            </div>\r\n                            <div className=\"form-group \">\r\n                                <div className=\"form-control-input input-group\">\r\n                                    <div className=\"input-group-prepend\">\r\n                                        <label htmlFor=\"register-email\" className=\"input-group-text\"><i className=\"fa fa-envelope\"></i></label>\r\n                                    </div>\r\n                                    \r\n                                    <input type=\"email\" name=\"email\" id=\"register-email\" onChange={this.inputDidUpdate} onKeyUp={this.inputDidUpdate} className=\"form-control\" placeholder=\"Nhập email\" value={form.email} />\r\n                                </div>\r\n                            </div>\r\n                            \r\n                            <div className=\"form-group \">\r\n                                <div className=\"form-control-input input-group\">\r\n                                    <div className=\"input-group-prepend\">\r\n                                        <label htmlFor=\"register-username\" className=\"input-group-text\"><i className=\"fa fa-lock\"></i></label>\r\n                                    </div>\r\n                                    <input type=\"text\" name=\"username\" id=\"register-username\" onChange={this.inputDidUpdate} onKeyUp={this.inputDidUpdate} className=\"form-control\" placeholder=\"Nhập tên người dùng\" value={form.username} />\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"form-group \">\r\n                                <div className=\"form-control-input input-group\">\r\n                                    <div className=\"input-group-prepend\">\r\n                                        <label htmlFor=\"register-password\" className=\"input-group-text\"><i className=\"fa fa-key\"></i></label>\r\n                                    </div>\r\n                                    <input type=\"password\" name=\"password\" id=\"register-password\" onChange={this.inputDidUpdate} onKeyUp={this.inputDidUpdate} className=\"form-control\"  placeholder=\"Nhập mật khẩu\" value={form.password} />\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"form-group \">\r\n                                <div className=\"form-control-input input-group\">\r\n                                    <div className=\"input-group-prepend\">\r\n                                        <label htmlFor=\"register-password-confirm\" className=\"input-group-text\"><i className=\"fa fa-key\"></i></label>\r\n                                    </div>\r\n                                    <input type=\"password\" name=\"password_confirmation\" id=\"register-password-confirm\" onChange={this.inputDidUpdate} onKeyUp={this.inputDidUpdate} className=\"form-control\"  placeholder=\"Nhập lại mật khẩu\" value={form.password_confirmation} />\r\n                                </div>\r\n                            </div>\r\n                            \r\n                            <div className=\"form-group buttons text-center\">\r\n                                <button type=\"button\" className=\"btn btn-warning text-white\" onClick={this.register}><i className=\"fa fa-pencil-square-o\"></i> Đăng ký</button> <button type=\"button\" className=\"btn btn-default\" onClick={this.showLogin}><i className=\"fa fa-unlock\"></i> Đăng nhập</button>\r\n                            </div>\r\n                            \r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n    componentDidMount(){\r\n        this.ioEventListener();\r\n        if(Messenger.checkLogin()){\r\n            this.props.history.push('/home');\r\n        }else if(Messenger.access_token){\r\n            this.emit('verify-account', {\r\n                data:{\r\n                    access_token:Messenger.access_token,\r\n                },\r\n                success:'register-success'\r\n            });\r\n        }\r\n        console.log('register rendered');\r\n    }\r\n\r\n    emit = (event, data) => {\r\n        Messenger.socket().emit(event, data);\r\n    }\r\n\r\n    \r\n    ioEventListener = () => {\r\n        const socket = Messenger.socket();\r\n        // dang nhap thanh cong\r\n        socket.on('register-success', (user) => {\r\n            let {access_token} = user;\r\n            LS.set('access_token', access_token);\r\n            Messenger.set({user, access_token:access_token});\r\n            this.reset();\r\n            this.showChatBox();\r\n        });\r\n        \r\n        socket.on('register-fail', (data) => {\r\n            alert('lỗi không xác định');\r\n        });\r\n        \r\n        \r\n    }\r\n    \r\n    showLogin = () => {\r\n        this.props.history.push('/login');\r\n        return false;\r\n    }\r\n\r\n    showChatBox = () => {\r\n        this.props.history.push('/messages');\r\n        return false;\r\n    }\r\n\r\n    inputDidUpdate = (e) => {\r\n        let input = e.target;\r\n        let name = input.name;\r\n        let value = input.value;\r\n        let {form} = this.state;\r\n        form[name] = value;\r\n        this.setState({form});\r\n    }\r\n\r\n    chooseAvatar = (e) => {\r\n        let input = e.target;\r\n        if (window.File && window.FileList && window.FileReader){\r\n            let files = input.files;\r\n            if(files.length){\r\n                let file = files[0];\r\n                if (file.type.indexOf(\"image\") == 0) {\r\n                    var fileReader = new FileReader();\r\n                    fileReader.onload = (f) => {\r\n\r\n                        let {form} = this.state;\r\n                        form.avatar = f.target.result;\r\n                        form.avatar_file = file.name;\r\n                        this.setState({form})\r\n                    };\r\n\r\n                    fileReader.readAsDataURL(file);\r\n                }\r\n                else{\r\n                    alert(\"File không hợp lệ\");\r\n                }\r\n            }\r\n        }\r\n        else{\r\n            alert('trình duyệt không hổ trọ upload file');\r\n        }\r\n    }\r\n\r\n\r\n    register = () => {\r\n        let {form} = this.state;\r\n        let requiredFields = ['name','email', 'username', 'password','password_confirmation'];\r\n        let errors = [];\r\n        let labels = {name:'Họ tên', email: 'Email', username:\"Tên đăng nhập\", password:\"Mật khẩu\", password_confirmation:\"Mật khẩu xác nhận\"};\r\n        for(let name in form){\r\n            if(requiredFields.indexOf(name) !== -1){\r\n                let lab = labels[name];\r\n                let val = form[name];\r\n                if(!val.length){\r\n                    errors.push(lab+\" không được bỏ trống!\");\r\n                }else if(name === 'email'){\r\n                    let isEmail = /^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/.test(val);\r\n                    if(!isEmail){\r\n                        errors.push(lab+\" không hợp lệ\");\r\n                    }\r\n                }else if(name === 'username'){\r\n                    let isUsername = /^\\w+([\\._]?\\w+)*$/.test(val);\r\n                    if(!isUsername){\r\n                        errors.push(lab+\" không hợp lệ\");\r\n                    }\r\n                }else if(name === 'password'){\r\n                    if(val.length<6){\r\n                        errors.push(lab+\" phải chứa ít nhất 6 ký tự\");\r\n                    }\r\n                }\r\n                else if(name === 'password_confirmation'){\r\n                    if(val !== form.password){\r\n                        errors.push(lab+\" không khớp\");\r\n                    }\r\n                }\r\n                \r\n            }\r\n        }\r\n        if(errors.length){\r\n            alert(errors.join(\"\\n\"));\r\n        }else{\r\n\r\n            Messenger.request('create', 'POST', form, (res)=>{\r\n                if(!res.status){\r\n                    if(res.errors) alert(res.errors.join(\", \\n\"));\r\n                }else{\r\n                    var access_token = res.access_token;\r\n                    let verify = {\r\n                        data:{access_token: access_token},\r\n                        success:\"register-success\",\r\n                        fail:'register-fail'\r\n                    }\r\n                    this.emit('verify-account', verify);\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    reset = () => {\r\n        let form ={\r\n            name:\"\",\r\n            email:\"\",\r\n            avatar: \"\",\r\n            avatar_file: \"\",\r\n            username:\"\",\r\n            password:\"\",\r\n            password_confirmation:\"\"\r\n        };\r\n        this.setState({form});\r\n    }\r\n}\r\n\r\nexport default Register;\n\n\n// WEBPACK FOOTER //\n// ./src/Register.js"],"sourceRoot":""}