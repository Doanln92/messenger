webpackJsonp([3],{127:function(e,t,a){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=a(0),o=a.n(i),l=(a(49),a(25)),c=a(48),m=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),p=function(e){function t(e){r(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.emit=function(e,t){c.a.socket().emit(e,t)},a.ioEventListener=function(){var e=c.a.socket();e.on("register-success",function(e){var t=e.access_token;l.a.set("access_token",t),c.a.set({user:e,access_token:t}),a.reset(),a.showChatBox()}),e.on("register-fail",function(e){alert("l\u1ed7i kh\xf4ng x\xe1c \u0111\u1ecbnh")})},a.showLogin=function(){return a.props.history.push("/login"),!1},a.showChatBox=function(){return a.props.history.push("/messages"),!1},a.inputDidUpdate=function(e){var t=e.target,r=t.name,n=t.value,s=a.state.form;s[r]=n,a.setState({form:s})},a.chooseAvatar=function(e){var t=e.target;if(window.File&&window.FileList&&window.FileReader){var r=t.files;if(r.length){var n=r[0];if(0==n.type.indexOf("image")){var s=new FileReader;s.onload=function(e){var t=a.state.form;t.avatar=e.target.result,t.avatar_file=n.name,a.setState({form:t})},s.readAsDataURL(n)}else alert("File kh\xf4ng h\u1ee3p l\u1ec7")}}else alert("tr\xecnh duy\u1ec7t kh\xf4ng h\u1ed5 tr\u1ecd upload file")},a.register=function(){var e=a.state.form,t=["name","email","username","password","password_confirmation"],r=[],n={name:"H\u1ecd t\xean",email:"Email",username:"T\xean \u0111\u0103ng nh\u1eadp",password:"M\u1eadt kh\u1ea9u",password_confirmation:"M\u1eadt kh\u1ea9u x\xe1c nh\u1eadn"};for(var s in e)if(-1!==t.indexOf(s)){var i=n[s],o=e[s];if(o.length)if("email"===s){var l=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(o);l||r.push(i+" kh\xf4ng h\u1ee3p l\u1ec7")}else if("username"===s){var m=/^\w+([\._]?\w+)*$/.test(o);m||r.push(i+" kh\xf4ng h\u1ee3p l\u1ec7")}else"password"===s?o.length<6&&r.push(i+" ph\u1ea3i ch\u1ee9a \xedt nh\u1ea5t 6 k\xfd t\u1ef1"):"password_confirmation"===s&&o!==e.password&&r.push(i+" kh\xf4ng kh\u1edbp");else r.push(i+" kh\xf4ng \u0111\u01b0\u1ee3c b\u1ecf tr\u1ed1ng!")}r.length?alert(r.join("\n")):c.a.request("create","POST",e,function(e){if(e.status){var t=e.access_token,r={data:{access_token:t},success:"register-success",fail:"register-fail"};a.emit("verify-account",r)}else e.errors&&alert(e.errors.join(", \n"))})},a.reset=function(){var e={name:"",email:"",avatar:"",avatar_file:"",username:"",password:"",password_confirmation:""};a.setState({form:e})},a.state={form:{name:"",email:"",avatar:"",avatar_file:"",username:"",password:"",password_confirmation:""}},a}return s(t,e),m(t,[{key:"render",value:function(){var e=this.state.form,t=""!==e.avatar_file?e.avatar_file:"Ch\u1ecdn \u1ea3nh \u0111ai di\u1ec7n";return o.a.createElement("div",{className:"register-screen"},o.a.createElement("div",{className:"register-form"},o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"form-inputs"},o.a.createElement("h4",null,"\u0110\u0103ng k\xfd"),o.a.createElement("div",{className:"form-group"},o.a.createElement("div",{className:"form-control-input input-group"},o.a.createElement("div",{className:"input-group-prepend"},o.a.createElement("label",{htmlFor:"register-name",className:"input-group-text"},o.a.createElement("i",{className:"fa fa-user"}))),o.a.createElement("input",{type:"text",name:"name",id:"register-name",onChange:this.inputDidUpdate,onKeyUp:this.inputDidUpdate,className:"form-control",placeholder:"Nh\u1eadp h\u1ecd v\xe0 t\xean",value:e.name}))),o.a.createElement("div",{className:"form-group"},o.a.createElement("div",{className:"input-group mb-3"},o.a.createElement("div",{className:"input-group-prepend"},o.a.createElement("span",{className:"input-group-text"},o.a.createElement("i",{className:"fa fa-picture-o"}))),o.a.createElement("div",{className:"custom-file"},o.a.createElement("input",{type:"file",accept:"image/png, image/jpeg, image/gif",onChange:this.chooseAvatar,id:"register-user-avatar",className:"custom-file-input"}),o.a.createElement("label",{className:"custom-file-label",htmlFor:"register-user-avatar"},t)))),o.a.createElement("div",{className:"form-group "},o.a.createElement("div",{className:"form-control-input input-group"},o.a.createElement("div",{className:"input-group-prepend"},o.a.createElement("label",{htmlFor:"register-email",className:"input-group-text"},o.a.createElement("i",{className:"fa fa-envelope"}))),o.a.createElement("input",{type:"email",name:"email",id:"register-email",onChange:this.inputDidUpdate,onKeyUp:this.inputDidUpdate,className:"form-control",placeholder:"Nh\u1eadp email",value:e.email}))),o.a.createElement("div",{className:"form-group "},o.a.createElement("div",{className:"form-control-input input-group"},o.a.createElement("div",{className:"input-group-prepend"},o.a.createElement("label",{htmlFor:"register-username",className:"input-group-text"},o.a.createElement("i",{className:"fa fa-lock"}))),o.a.createElement("input",{type:"text",name:"username",id:"register-username",onChange:this.inputDidUpdate,onKeyUp:this.inputDidUpdate,className:"form-control",placeholder:"Nh\u1eadp t\xean ng\u01b0\u1eddi d\xf9ng",value:e.username}))),o.a.createElement("div",{className:"form-group "},o.a.createElement("div",{className:"form-control-input input-group"},o.a.createElement("div",{className:"input-group-prepend"},o.a.createElement("label",{htmlFor:"register-password",className:"input-group-text"},o.a.createElement("i",{className:"fa fa-key"}))),o.a.createElement("input",{type:"password",name:"password",id:"register-password",onChange:this.inputDidUpdate,onKeyUp:this.inputDidUpdate,className:"form-control",placeholder:"Nh\u1eadp m\u1eadt kh\u1ea9u",value:e.password}))),o.a.createElement("div",{className:"form-group "},o.a.createElement("div",{className:"form-control-input input-group"},o.a.createElement("div",{className:"input-group-prepend"},o.a.createElement("label",{htmlFor:"register-password-confirm",className:"input-group-text"},o.a.createElement("i",{className:"fa fa-key"}))),o.a.createElement("input",{type:"password",name:"password_confirmation",id:"register-password-confirm",onChange:this.inputDidUpdate,onKeyUp:this.inputDidUpdate,className:"form-control",placeholder:"Nh\u1eadp l\u1ea1i m\u1eadt kh\u1ea9u",value:e.password_confirmation}))),o.a.createElement("div",{className:"form-group buttons text-center"},o.a.createElement("button",{type:"button",className:"btn btn-warning text-white",onClick:this.register},o.a.createElement("i",{className:"fa fa-pencil-square-o"})," \u0110\u0103ng k\xfd")," ",o.a.createElement("button",{type:"button",className:"btn btn-default",onClick:this.showLogin},o.a.createElement("i",{className:"fa fa-unlock"})," \u0110\u0103ng nh\u1eadp"))))))}},{key:"componentDidMount",value:function(){this.ioEventListener(),c.a.checkLogin()?this.props.history.push("/home"):c.a.access_token&&this.emit("verify-account",{data:{access_token:c.a.access_token},success:"register-success"}),console.log("register rendered")}}]),t}(i.Component);t.default=p}});
//# sourceMappingURL=3.8ef1b7ea.chunk.js.map